<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.spring.prcsInsp.mapper.PrcsInspMapper">
	<!-- 모달창 검사 목록 조회 --><!-- 제품명제품코드 가져오기위해 수정필요 -->
	<select id="selectPrcsList" resultType="PrcsInspVO">
		SELECT p.prcs_cd,
       		   r.prcs_nm,
	           p.prod_cnt,
               i.edcts_cd,
                 prdt_nm
		FROM prcs_prog p JOIN prcs r ON p.prcs_cd = r.prcs_cd
		JOIN indica_dtl i ON p.indica_cd = i.indica_cd
		JOIN edcts e ON e.edcts_cd = i.edcts_cd		
		WHERE LENGTH(p.prcs_status) = 4    
	</select>
	<!-- 공정별 검사기준 -->
	<select id="selectPrcsStd" parameterType="PrcsInspVO" resultType="PrcsInpsVO">
		SELECT prcs_insp_cd,
       		   prcs_insp_nm,
       		   prcs_insp_std
		FROM prcs_insp_std
		WHERE prcs_cd = #{prcsCd}
	</select>
	
	<!-- max 완제품LOT번호 -->
	<select id="selectMaxEdctsLotNo" resultType="PrcsInspVO">
		SELECT NVL(MAX(edcts_lot_no),'EDCTS-L'||TO_CHAR(SYSDATE,'yyyyMMdd')||0) edcts_lot_no
		FROM prdt_insp
	</select>
	

</mapper>  